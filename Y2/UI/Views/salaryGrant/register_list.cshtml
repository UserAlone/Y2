
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>register_list</title>
    <script src="~/js/comm/comm.js"></script>
    <script src="~/js/jquery-1.7.2.js"></script>
    <link href="~/css/table.css" rel="stylesheet" />
</head>
<body>
    @{  List<Dictionary<string, object>> list = (List<Dictionary<string, object>>)ViewData["list"];}
    <table width="100%">
        <tr>
            <td colspan="2" style="text-align: left">
                <font color="black">
                    您正在做的业务是：人力资源--薪酬标准管理--薪酬发放登记(负责人控制)
                </font>

            </td>
        </tr>

    </table>
    <br>
    薪酬总数:<span id="zongshu"></span>，
    总人数:<span id="zongrenshu"></span>，基本薪酬总数:<span id="jibenxinchou"></span>，实发总额:<span id="shifa"></span>
    <table width="100%" border="1" cellpadding=0 cellspacing=1
           bordercolorlight=#848284 bordercolordark=#eeeeee
           class="TABLE_STYLE1" id="table">
        <tr>
            <td width="10%" class="TD_STYLE1">
                <span>序号</span>
            </td>
            <td width="40%" class="TD_STYLE1">
                <span>I级机构名称</span>
            </td>
            <td width="10%" class="TD_STYLE1">
                <span>人数</span>
            </td>
            <td width="10%" class="TD_STYLE1">
                基本薪酬总额(元) 
            </td>
            <td width="10%" class="TD_STYLE1">
                登记
            </td>
        </tr>
        @for (int i = 0; i < list.Count; i++)
        {                     
            <tr class="TD_STYLE2">
                <td>
                    @(i+1)
                </td>
                <td>@list[i]["config_name"] </td>
                <td>
                    @list[i]["count"]
                </td>
                <td>
                    @list[i]["sum"]
                </td>
                <td>
                    <input type="hidden" value="@list[i]["实发总金额"]" name="shifa" />
                    <a href="/salaryGrant/register_commit?level=@list[i]["level"]&id=@list[i]["config_id"]&configName=@list[i]["config_name"]">登 记</a>
                </td>
            </tr>
        }     
    </table>
    <p>
        &nbsp;
    </p>
    <script type="text/javascript">
        $(function () {
            var $trs = $("#table tr:gt(0)");
            $("#zongshu").text($trs.length); //总数
            var zongrenshu = 0;
            var jibenxinchou = 0;
            var shifa = 0;
            $.each($trs, function (index, dom) {
                shifa += parseFloat(document.getElementsByName("shifa")[index].value);            
                zongrenshu += Number($(dom).children().last().prev().prev().text());
                jibenxinchou += parseFloat($(dom).children().last().prev().text());
            });
            $("#zongrenshu").text(zongrenshu); //总人数
            $("#jibenxinchou").text(jibenxinchou);//基本薪酬总额
            $("#shifa").text(shifa);//实发总金额
        });
    </script>
</body>
</html>
