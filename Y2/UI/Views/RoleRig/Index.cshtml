
@{
    ViewBag.Title = "Index";
}

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>角色管理</title>
    <link rel="stylesheet"
          href="../../css/table.css" type="text/css" />
    <script src="~/Scripts/jquery-1.7.1.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script type="text/javascript">
        var currentPage = 1;
        var pageSize = 3;
        var page = 0;
        var wos = 0;
        $(function () {
            fill();

        })
       
        function fill() {
            $.ajax({
                url: "/RoleRig/Index2/?currentPage=" + currentPage + "&pageSize=" + pageSize,
                type: "get",
                success: function (dt1) {
                    var data = JSON.parse(dt1);
                    var dt = data["dt"];
                    $("#tables tr:gt(0)").remove();
                    for (var i = 0; i < dt.length; i++) {
                        var $tr = $("<tr></tr>");
                        var $td = $("<td>" + dt[i]["rid"] + "</td>");
                        var $td2 = $("<td>" + dt[i]["rname"] + "</td>");
                        var $td3 = null;
                        if (dt[i]["rys"] == 1) {
                            $td3 = $("<td>是</td>");
                        } else {
                            $td3 = $("<td>否</td>");
                        }
                        var $td4 = $('<td> <a href="../RoleRig/Edit/' + dt[i]["rid"] + '"><img src="../../images/bt_edit.gif" title="编辑" style="cursor:pointer;" id="xg" /></a><a href="../RoleRig/Delete/' + dt[i]["rid"] + '"><img src="../../images/bt_del.gif" title="删除" style="cursor:pointer;" /></a></td>');
                        $tr.append($td, $td2, $td3, $td4);
                        $("#tables").append($tr);
                    }
                    page = data["pages"];
                    wos = data["rows"];
                    $("#leftPage").text("共有" + wos + "条记录，"+page+"页，当前第" + currentPage + "页");
                }
            })
        }
            
        



      
            function sy() {
                currentPage = 1;
                fill();
            }
            function syy() {
                if (currentPage > 1) {
                    currentPage--;
                } else {
                    currentPage = 1;
                }
                fill();
            }
            function wy() {
                currentPage = page;
                fill();
            }
            function xyy() {
                if (page > currentPage) {
                    currentPage++;
                }
                
                fill();
            }



        
    </script>

</head>
<body>
    <table width="100%">
        <tr>
            <td>
                <font color="black">您正在做的业务是：人力资源--权限管理--角色管理 </font>
            </td>
        </tr>
        <tr>
            <td>
                当前角色总数：8例
            </td>
        </tr>
        <tr>
            <td align="right">
                <input type="button" value="添加角色" class="BUTTON_STYLE1" onclick="location.href = '../RoleRig/Create'">
            </td>
        </tr>
    </table>
    <div>
    <table width="100%" border="1" cellpadding=5 cellspacing=1
           bordercolorlight=#848284 bordercolordark=#eeeeee
           class="TABLE_STYLE1" id="tables">
        <tr class="TR_STYLE1">
            <td class="TD_STYLE1">
                角色编号
            </td>
            <td class="TD_STYLE1">
                角色名称
            </td>
            <td class="TD_STYLE1">
                是否可用
            </td>
            <td class="TD_STYLE1">
                操作
            </td>
        </tr>
    </table>

    <p style="text-align:center;">
        
        <a href="#" style="color:black;" onclick="sy()">首页</a>
        <a href="#" style="color:black;" onclick="syy()">上一页</a>
        <span id="leftPage">共有120条记录，当前第1/10页</span>
        <a href="#" style="color:black;" onclick="xyy()">下一页</a>
        <a href="#" style="color:black;" onclick="wy  ()">尾页</a>

    </p>
</body>

</html>


